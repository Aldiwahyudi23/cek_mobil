import{r as c,T as B,j as D,d as i,o as a,a as e,b as n,w as p,f as m,k as _,x as k,F as w,g as h,h as O,u as l,t as r,v as j,N as E}from"./app-DE5iW-zt.js";import{_ as I}from"./PrimaryButton-C5A_b8zd.js";import{_ as A}from"./SecondaryButton-a_C0-x8w.js";import{_ as x}from"./InputLabel-CBUKSUPl.js";import{_ as V}from"./TextInput-DjM9czBB.js";import{_ as K}from"./CustomModal-Cflpug2n.js";const L={class:"p-4"},q={class:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-4 md:space-y-0"},z={class:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 w-full md:w-auto"},H=["value"],Q={class:"relative"},G={class:"overflow-x-auto"},J={class:"min-w-full border bg-white rounded-lg shadow-md"},R={class:"px-4 py-2"},W={class:"px-4 py-2"},X={class:"px-4 py-2"},Y={class:"px-4 py-2"},Z={class:"px-4 py-2 text-center"},ee={key:0,class:"px-2 py-1 text-green-700 bg-green-200 rounded-full text-sm"},te={key:1,class:"px-2 py-1 text-red-700 bg-red-200 rounded-full text-sm"},oe={class:"px-4 py-2 text-center"},se={class:"mb-4"},ne=["value"],le={class:"mb-4"},ie={class:"mb-4"},ae={class:"mb-4"},de={class:"flex items-center"},re={class:"flex justify-end mt-4"},_e={__name:"Index",props:{inspectionPoints:Array,categories:Array},setup(N){const y=N,g=c(!1),u=c(!1),C=c(null),s=B({categories_id:"",name:"",description:"",type_input:"",is_active:!0}),v=c(""),b=c(""),P=D(()=>y.inspectionPoints.filter(d=>{const t=v.value?d.categories_id===v.value:!0,o=d.name.toLowerCase().includes(b.value.toLowerCase());return t&&o})),S=(d,t=null)=>{u.value=d==="edit",g.value=!0,u.value&&t?(C.value=t.id,s.categories_id=t.categories_id,s.name=t.name,s.description=t.description,s.type_input=t.type_input,s.is_active=!!t.is_active):T()},T=()=>{s.categories_id="",s.name="",s.description="",s.type_input="",s.is_active=!0},f=()=>{g.value=!1,T()},F=()=>{u.value?s.put(route("inspection-points.update",C.value),{onSuccess:()=>f()}):s.post(route("inspection-points.store"),{onSuccess:()=>f()})},U=d=>{confirm("Apakah Anda yakin ingin menghapus data ini?")&&E.delete(route("inspection-points.destroy",d))};return(d,t)=>(a(),i("div",L,[e("div",q,[n(I,{onClick:t[0]||(t[0]=o=>S("create"))},{default:p(()=>t[8]||(t[8]=[m("Tambah Inspection Point")])),_:1}),e("div",z,[_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>v.value=o),class:"border rounded px-7 py-2"},[t[9]||(t[9]=e("option",{value:""},"Semua Kategori",-1)),(a(!0),i(w,null,h(y.categories,o=>(a(),i("option",{key:o.id,value:o.id},r(o.name),9,H))),128))],512),[[k,v.value]]),e("div",Q,[n(V,{modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=o=>b.value=o),placeholder:"Cari Inspection Point...",class:"w-full md:w-48 pl-10 pr-4 py-2 border"},null,8,["modelValue"]),t[10]||(t[10]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35m0 0A8.5 8.5 0 1010.5 19a8.5 8.5 0 006.15-2.85z"})],-1))])])]),e("div",G,[e("table",J,[t[13]||(t[13]=e("thead",{class:"bg-gray-200"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"No"),e("th",{class:"px-4 py-2 text-left"},"Kategori"),e("th",{class:"px-4 py-2 text-left"},"Nama"),e("th",{class:"px-4 py-2 text-left"},"Tipe Input"),e("th",{class:"px-4 py-2 text-center"},"Status"),e("th",{class:"px-4 py-2 text-center"},"Aksi")])],-1)),e("tbody",null,[(a(!0),i(w,null,h(P.value,(o,$)=>(a(),i("tr",{key:o.id,class:"border-b hover:bg-gray-100"},[e("td",R,r($+1),1),e("td",W,r(o.category.name),1),e("td",X,r(o.name),1),e("td",Y,r(o.type_input),1),e("td",Z,[o.is_active?(a(),i("span",ee,"Aktif")):(a(),i("span",te,"Tidak Aktif"))]),e("td",oe,[n(A,{onClick:M=>S("edit",o)},{default:p(()=>t[11]||(t[11]=[m("Edit")])),_:2},1032,["onClick"]),n(I,{class:"ml-2 bg-red-600 hover:bg-red-700",onClick:M=>U(o.id)},{default:p(()=>t[12]||(t[12]=[m("Hapus")])),_:2},1032,["onClick"])])]))),128))])])]),n(K,{show:g.value,title:u.value?"Edit Inspection Point":"Tambah Inspection Point",onClose:f},{content:p(()=>[e("form",{onSubmit:O(F,["prevent"])},[e("div",se,[n(x,{for:"categories_id",value:"Kategori"}),_(e("select",{id:"categories_id","onUpdate:modelValue":t[3]||(t[3]=o=>l(s).categories_id=o),class:"block w-full border p-2 rounded"},[(a(!0),i(w,null,h(y.categories,o=>(a(),i("option",{key:o.id,value:o.id},r(o.name),9,ne))),128))],512),[[k,l(s).categories_id]])]),e("div",le,[n(x,{for:"name",value:"Nama Inspection"}),n(V,{id:"name",modelValue:l(s).name,"onUpdate:modelValue":t[4]||(t[4]=o=>l(s).name=o),class:"block w-full",required:""},null,8,["modelValue"])]),e("div",ie,[n(x,{for:"description",value:"Deskripsi"}),n(V,{id:"description",modelValue:l(s).description,"onUpdate:modelValue":t[5]||(t[5]=o=>l(s).description=o),class:"block w-full"},null,8,["modelValue"])]),e("div",ae,[n(x,{for:"type_input",value:"Tipe Input"}),_(e("select",{id:"type_input","onUpdate:modelValue":t[6]||(t[6]=o=>l(s).type_input=o),class:"block w-full border p-2 rounded",required:""},t[14]||(t[14]=[e("option",{value:""},"--Pilih Tipe Input--",-1),e("option",{value:"Input Text"},"Input Text",-1),e("option",{value:"Input Number"},"Input Number",-1),e("option",{value:"Input Account"},"Input Account",-1),e("option",{value:"Tanggal"},"Tanggal",-1),e("option",{value:"Foto"},"Foto",-1),e("option",{value:"Set"},"Set",-1),e("option",{value:"Damage"},"Damage",-1),e("option",{value:"Select"},"Select",-1),e("option",{value:"Option"},"Option",-1),e("option",{value:"Sop"},"SOP",-1),e("option",{value:"Option to Foto"},"Option to Foto",-1)]),512),[[k,l(s).type_input]])]),e("div",de,[_(e("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":t[7]||(t[7]=o=>l(s).is_active=o),class:"mr-2"},null,512),[[j,l(s).is_active]]),t[15]||(t[15]=e("label",{for:"is_active"},"Aktif",-1))]),e("div",re,[n(A,{type:"button",onClick:f},{default:p(()=>t[16]||(t[16]=[m("Batal")])),_:1}),n(I,{class:"ml-3",type:"submit"},{default:p(()=>[m(r(u.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"])]))}};export{_e as default};
