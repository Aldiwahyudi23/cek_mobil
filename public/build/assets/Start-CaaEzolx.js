import{d as n,e as c,o as s,a,s as D,b as w,F as v,g as x,Q as U,r as p,n as _,t as g,k as b,x as y}from"./app-C1DIM2cv.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={props:["isVisible"],methods:{selectCamera(){this.$refs.cameraInput.click()},selectGallery(){this.$refs.galleryInput.click()},handleFileChange(i){const l=i.target.files[0];if(l){const u=URL.createObjectURL(l);this.$emit("fileSelected",u)}}}},I={key:0,class:"modal"},M={class:"modal-content"};function A(i,l,u,t,f,d){return u.isVisible?(s(),n("div",I,[a("div",M,[a("button",{class:"close-btn",onClick:l[0]||(l[0]=r=>i.$emit("close"))},"âœ–"),l[5]||(l[5]=a("h3",{class:"text-lg font-bold mb-4"},"Pilih Sumber Foto",-1)),a("button",{onClick:l[1]||(l[1]=(...r)=>d.selectCamera&&d.selectCamera(...r)),class:"btn-option"},"ðŸ“· Kamera"),a("button",{onClick:l[2]||(l[2]=(...r)=>d.selectGallery&&d.selectGallery(...r)),class:"btn-option"},"ðŸ–¼ Galeri"),a("input",{type:"file",ref:"cameraInput",accept:"image/*",capture:"environment",onChange:l[3]||(l[3]=(...r)=>d.handleFileChange&&d.handleFileChange(...r)),style:{display:"none"}},null,544),a("input",{type:"file",ref:"galleryInput",accept:"image/*",onChange:l[4]||(l[4]=(...r)=>d.handleFileChange&&d.handleFileChange(...r)),style:{display:"none"}},null,544)])])):c("",!0)}const G=C(V,[["render",A],["__scopeId","data-v-e81821d4"]]),T={setup(){const i=U(),l=p(i.props.categories),u=p(0),t=p(l.value.length?l.value[0].inspection_points:[]),f=p({}),d=p({}),r=p(!1),e=p(null);return{categories:l,activeTab:u,inspectionPoints:t,formData:f,selectCategory:(m,h)=>{u.value=h,t.value=m.inspection_points.filter(F=>F.is_active)},filledCounts:d,showModal:r,selectedFilePoint:e,toggleOption:(m,h)=>{f.value[m]=h},openModal:m=>{e.value=m,r.value=!0},handleFileUpload:m=>{e.value!==null&&(f.value[e.value+"_file"]=m,r.value=!1)}}},components:{FileModal:G},methods:{formatCurrency(i){let l=this.formData[i].replace(/\D/g,"");l=l.replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.formData[i]=l}}},O={class:"bg-white min-h-screen"},P={class:"overflow-x-auto whitespace-nowrap bg-gray-100 border-b flex scrollbar-hide fixed top-12 left-0 w-full z-40",ref:"categoryContainer"},S=["onClick"],B={class:"p-4 mt-20"},N={key:0},z={class:"block text-sm font-medium"},L=["onUpdate:modelValue","placeholder","onInput"],j=["onUpdate:modelValue","onInput","placeholder"],R=["onUpdate:modelValue","placeholder"],E=["onUpdate:modelValue"],J={key:4,class:"mt-2 flex justify-center gap-4"},K=["onClick"],Q=["onClick"],q={key:5,class:"mt-3"},H=["onClick"],W=["src"],X={key:1,class:"upload-placeholder flex flex-col items-center"};function Y(i,l,u,t,f,d){const r=D("FileModal");return s(),n("div",O,[l[3]||(l[3]=a("div",{class:"bg-blue-600 text-white text-center py-4 font-bold text-lg fixed top-0 left-0 w-full z-50"}," Inspeksi Mobil ",-1)),a("div",P,[(s(!0),n(v,null,x(t.categories,(e,o)=>(s(),n("button",{key:e.id,onClick:k=>t.selectCategory(e,o),class:_(["flex-shrink-0 px-4 py-3 border-b-2",t.activeTab===o?"border-blue-600 text-blue-600 font-bold":"border-transparent text-gray-500"])},g(e.name)+" ("+g(t.filledCounts[e.id]||0)+"/"+g(e.inspection_points.length)+") ",11,S))),128))],512),a("div",B,[t.inspectionPoints.length?(s(),n("div",N,[(s(!0),n(v,null,x(t.inspectionPoints,e=>(s(),n("div",{key:e.id,class:"mt-4"},[a("label",z,g(e.name),1),e.type_input==="Input Text"?b((s(),n("input",{key:0,type:"text","onUpdate:modelValue":o=>t.formData[e.id]=o,class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:e.placeholder,onInput:o=>t.formData[e.id]=o.target.value.toUpperCase()},null,40,L)),[[y,t.formData[e.id]]]):c("",!0),e.type_input==="Input Account"?b((s(),n("input",{key:1,type:"text","onUpdate:modelValue":o=>t.formData[e.id]=o,onInput:o=>d.formatCurrency(e.id),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:e.placeholder},null,40,j)),[[y,t.formData[e.id]]]):c("",!0),e.type_input==="Input Number"?b((s(),n("input",{key:2,type:"number","onUpdate:modelValue":o=>t.formData[e.id]=o,class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:e.placeholder},null,8,R)),[[y,t.formData[e.id]]]):c("",!0),e.type_input==="Tanggal"?b((s(),n("input",{key:3,type:"date","onUpdate:modelValue":o=>t.formData[e.id]=o,class:"w-full border px-3 py-2 rounded-lg mt-1"},null,8,E)),[[y,t.formData[e.id]]]):c("",!0),e.type_input==="Option to Foto"?(s(),n("div",J,[a("button",{onClick:o=>t.toggleOption(e.id,"Ada"),class:_([{"bg-blue-500 text-white":t.formData[e.id]==="Ada"},"border px-4 py-2 rounded-lg"])},"Ada",10,K),a("button",{onClick:o=>t.toggleOption(e.id,"Tidak Ada"),class:_([{"bg-blue-500 text-white":t.formData[e.id]==="Tidak Ada"},"border px-4 py-2 rounded-lg"])},"Tidak Ada",10,Q)])):c("",!0),e.type_input==="Foto"||t.formData[e.id]==="Ada"?(s(),n("div",q,[l[2]||(l[2]=a("p",{class:"text-gray-600 text-sm"},"File JPG berukuran maks 2,5 MB",-1)),a("div",{class:"photo-upload border rounded-xl p-3 text-center cursor-pointer",onClick:o=>t.openModal(e.id)},[t.formData[e.id+"_file"]?(s(),n("img",{key:0,src:t.formData[e.id+"_file"],alt:"Foto",class:"photo-preview rounded-xl"},null,8,W)):(s(),n("div",X,l[1]||(l[1]=[a("i",{class:"icon-upload text-gray-400 text-3xl mb-2"},null,-1),a("p",{class:"text-gray-500"},"Upload Foto",-1)])))],8,H)])):c("",!0)]))),128))])):c("",!0)]),w(r,{isVisible:t.showModal,onClose:l[0]||(l[0]=e=>t.showModal=!1),onCamera:i.openCamera,onGallery:i.openGallery,onFileSelected:t.handleFileUpload},null,8,["isVisible","onCamera","onGallery","onFileSelected"])])}const te=C(T,[["render",Y],["__scopeId","data-v-78e1ddc3"]]);export{te as default};
