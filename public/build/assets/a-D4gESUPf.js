import{y as w,d as a,o as n,a as d,b as D,F as g,g as x,e as r,Q as F,r as c,n as b,t as f,k as p,s as _}from"./app-DNrnTGfX.js";import{F as U}from"./FileModal-DmBsjcu4.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={setup(){const i=F(),l=c(i.props.categories),h=c(0),t=c(l.value.length?l.value[0].inspection_points:[]),u=c({}),v=c({}),m=c(!1),e=c(null);return{categories:l,activeTab:h,inspectionPoints:t,formData:u,selectCategory:(s,y)=>{h.value=y,t.value=s.inspection_points.filter(C=>C.is_active)},filledCounts:v,showModal:m,selectedFilePoint:e,toggleOption:(s,y)=>{u.value[s]=y},openModal:s=>{e.value=s,m.value=!0},handleFileUpload:s=>{e.value!==null&&(u.value[e.value+"_file"]=s,m.value=!1)},removePhoto:s=>{u.value[s+"_file"]=null}}},components:{FileModal:U},methods:{formatCurrency(i){let l=this.formData[i].replace(/\D/g,"");l=l.replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.formData[i]=l}}},A={class:"bg-white min-h-screen"},I={class:"overflow-x-auto whitespace-nowrap bg-gray-100 border-b flex scrollbar-hide fixed top-12 left-0 w-full z-40",ref:"categoryContainer"},P=["onClick"],T={class:"p-4 mt-20"},B={key:0},O={class:"block text-sm font-medium"},G=["onUpdate:modelValue","placeholder","onInput"],N=["onUpdate:modelValue","onInput","placeholder"],j=["onUpdate:modelValue","placeholder"],z=["onUpdate:modelValue"],S={key:4,class:"mt-2 flex justify-center gap-4"},E=["onClick"],J=["onClick"],L={key:5,class:"mt-3"},Q={class:"flex items-center space-x-20"},q={key:0,class:"w-32 h-40"},H=["src"],K=["onClick"],R=["onClick"];function W(i,l,h,t,u,v){const m=w("FileModal");return n(),a("div",A,[l[3]||(l[3]=d("div",{class:"bg-blue-600 text-white text-center py-4 font-bold text-lg fixed top-0 left-0 w-full z-50"}," Inspeksi Mobil ",-1)),d("div",I,[(n(!0),a(g,null,x(t.categories,(e,o)=>(n(),a("button",{key:e.id,onClick:k=>t.selectCategory(e,o),class:b(["flex-shrink-0 px-4 py-3 border-b-2",t.activeTab===o?"border-blue-600 text-blue-600 font-bold":"border-transparent text-gray-500"])},f(e.name)+" ("+f(t.filledCounts[e.id]||0)+"/"+f(e.inspection_points.length)+") ",11,P))),128))],512),d("div",T,[t.inspectionPoints.length?(n(),a("div",B,[(n(!0),a(g,null,x(t.inspectionPoints,e=>(n(),a("div",{key:e.id,class:"mt-4"},[d("label",O,f(e.name),1),e.type_input==="Input Text"?p((n(),a("input",{key:0,type:"text","onUpdate:modelValue":o=>t.formData[e.id]=o,class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:e.placeholder,onInput:o=>t.formData[e.id]=o.target.value.toUpperCase()},null,40,G)),[[_,t.formData[e.id]]]):r("",!0),e.type_input==="Input Account"?p((n(),a("input",{key:1,type:"text","onUpdate:modelValue":o=>t.formData[e.id]=o,onInput:o=>v.formatCurrency(e.id),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:e.placeholder},null,40,N)),[[_,t.formData[e.id]]]):r("",!0),e.type_input==="Input Number"?p((n(),a("input",{key:2,type:"number","onUpdate:modelValue":o=>t.formData[e.id]=o,class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:e.placeholder},null,8,j)),[[_,t.formData[e.id]]]):r("",!0),e.type_input==="Tanggal"?p((n(),a("input",{key:3,type:"date","onUpdate:modelValue":o=>t.formData[e.id]=o,class:"w-full border px-3 py-2 rounded-lg mt-1"},null,8,z)),[[_,t.formData[e.id]]]):r("",!0),e.type_input==="Option to Foto"?(n(),a("div",S,[d("button",{onClick:o=>t.toggleOption(e.id,"Ada"),class:b([{"bg-blue-500 text-white":t.formData[e.id]==="Ada"},"border px-4 py-2 rounded-lg"])},"Ada",10,E),d("button",{onClick:o=>t.toggleOption(e.id,"Tidak Ada"),class:b([{"bg-blue-500 text-white":t.formData[e.id]==="Tidak Ada"},"border px-4 py-2 rounded-lg"])},"Tidak Ada",10,J)])):r("",!0),e.type_input==="Foto"||t.formData[e.id]==="Ada"?(n(),a("div",L,[l[2]||(l[2]=d("p",{class:"text-gray-600 text-sm"},"File JPG berukuran maks 2,5 MB",-1)),d("div",Q,[t.formData[e.id+"_file"]?(n(),a("div",q,[d("img",{src:t.formData[e.id+"_file"],alt:"Foto",class:"rounded-xl object-cover w-full h-full",style:{"aspect-ratio":"4 / 3"}},null,8,H)])):r("",!0),t.formData[e.id+"_file"]?(n(),a("button",{key:1,onClick:o=>t.removePhoto(e.id),class:"bg-red-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-red-700 transition"}," Delete ",8,K)):(n(),a("div",{key:2,class:"photo-upload border rounded-xl p-3 text-center cursor-pointer h-32 flex items-center w-full justify-center",onClick:o=>t.openModal(e.id)},l[1]||(l[1]=[d("div",{class:"upload-placeholder flex flex-col items-center"},[d("i",{class:"icon-upload text-gray-400 text-3xl mb-2"}),d("p",{class:"text-gray-500"},"Upload Foto")],-1)]),8,R))])])):r("",!0)]))),128))])):r("",!0)]),D(m,{isVisible:t.showModal,onClose:l[0]||(l[0]=e=>t.showModal=!1),onCamera:i.openCamera,onGallery:i.openGallery,onFileSelected:t.handleFileUpload},null,8,["isVisible","onCamera","onGallery","onFileSelected"])])}const oe=V(M,[["render",W],["__scopeId","data-v-cea89e4f"]]);export{oe as default};
