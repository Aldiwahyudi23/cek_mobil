import{d as r,o as d,a as l,k as s,s as m,x as U,y as D,b as F,n as x,F as h,g as M,c as V,e as p,Q as T,r as c,t as y}from"./app-D6Si7s7y.js";import{F as P}from"./FileModal-BAyr5743.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={props:{formData:{type:Object,required:!0}},methods:{handleFileUpload(b){const e=b.target.files[0];e&&(this.formData.file=e)},submitForm(){if(!this.formData.nopol||!this.formData.merek||!this.formData.tahun||!this.formData.model||!this.formData.type||!this.formData.cc||!this.formData.transmition||!this.formData.bahan_bakar||!this.formData.periode||!this.formData.warna){alert("Semua data detail mobil harus diisi!");return}this.$emit("submit",this.formData)}}},I={class:"space-y-4"},B={class:"mt-6"};function N(b,e,n,a,g,u){return d(),r("div",null,[l("div",I,[l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm font-medium"},"Nomor Polisi",-1)),s(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>n.formData.nopol=o),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:"Masukkan nomor polisi"},null,512),[[m,n.formData.nopol]])]),l("div",null,[e[13]||(e[13]=l("label",{class:"block text-sm font-medium"},"Merek Mobil",-1)),s(l("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>n.formData.merek=o),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:"Masukkan merek mobil"},null,512),[[m,n.formData.merek]])]),l("div",null,[e[14]||(e[14]=l("label",{class:"block text-sm font-medium"},"Tahun Mobil",-1)),s(l("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=o=>n.formData.tahun=o),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:"Masukkan tahun mobil"},null,512),[[m,n.formData.tahun]])]),l("div",null,[e[15]||(e[15]=l("label",{class:"block text-sm font-medium"},"Model Mobil",-1)),s(l("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>n.formData.model=o),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:"Masukkan model mobil"},null,512),[[m,n.formData.model]])]),l("div",null,[e[16]||(e[16]=l("label",{class:"block text-sm font-medium"},"Tipe Mobil",-1)),s(l("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=o=>n.formData.type=o),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:"Masukkan tipe mobil"},null,512),[[m,n.formData.type]])]),l("div",null,[e[17]||(e[17]=l("label",{class:"block text-sm font-medium"},"Kapasitas Mesin (CC)",-1)),s(l("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=o=>n.formData.cc=o),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:"Masukkan kapasitas mesin"},null,512),[[m,n.formData.cc]])]),l("div",null,[e[19]||(e[19]=l("label",{class:"block text-sm font-medium"},"Transmisi",-1)),s(l("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>n.formData.transmition=o),class:"w-full border px-3 py-2 rounded-lg mt-1"},e[18]||(e[18]=[l("option",{value:"AT"},"Automatic (AT)",-1),l("option",{value:"MT"},"Manual (MT)",-1)]),512),[[U,n.formData.transmition]])]),l("div",null,[e[20]||(e[20]=l("label",{class:"block text-sm font-medium"},"Bahan Bakar",-1)),s(l("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=o=>n.formData.bahan_bakar=o),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:"Masukkan bahan bakar"},null,512),[[m,n.formData.bahan_bakar]])]),l("div",null,[e[21]||(e[21]=l("label",{class:"block text-sm font-medium"},"Periode",-1)),s(l("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=o=>n.formData.periode=o),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:"Masukkan periode"},null,512),[[m,n.formData.periode]])]),l("div",null,[e[22]||(e[22]=l("label",{class:"block text-sm font-medium"},"Warna Mobil",-1)),s(l("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=o=>n.formData.warna=o),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:"Masukkan warna mobil"},null,512),[[m,n.formData.warna]])]),l("div",null,[e[23]||(e[23]=l("label",{class:"block text-sm font-medium"},"Upload File",-1)),l("input",{type:"file",onChange:e[10]||(e[10]=(...o)=>u.handleFileUpload&&u.handleFileUpload(...o)),class:"w-full border px-3 py-2 rounded-lg mt-1"},null,32)])]),l("div",B,[l("button",{onClick:e[11]||(e[11]=(...o)=>u.submitForm&&u.submitForm(...o)),class:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition"}," Lanjut ")])])}const O=w(A,[["render",N]]),S={components:{FileModal:P,DetailMobil:O},setup(){const b=T(),e=c(b.props.categories),n=c(-1),a=c([]),g=c([{id:"mobil_merek",name:"Merek Mobil",type_input:"Input Text",placeholder:"Masukkan merek mobil"},{id:"mobil_model",name:"Model Mobil",type_input:"Input Text",placeholder:"Masukkan model mobil"},{id:"mobil_tahun",name:"Tahun Mobil",type_input:"Input Number",placeholder:"Masukkan tahun mobil"},{id:"mobil_tanggal_pembelian",name:"Tanggal Pembelian",type_input:"Tanggal",placeholder:"Pilih tanggal pembelian"}]),u=c({}),o=c({}),k=c(!1),t=c(null);return{categories:e,activeTab:n,inspectionPoints:a,detailMobilPoints:g,formData:u,selectDetailMobil:()=>{n.value=-1,a.value=[]},selectCategory:(f,v)=>{n.value=v,a.value=f.inspection_points.filter(_=>_.is_active)},filledCounts:o,showModal:k,selectedFilePoint:t,toggleOption:(f,v)=>{u.value[f]=v},openModal:f=>{t.value=f,k.value=!0},handleFileUpload:f=>{t.value!==null&&(u.value[t.value+"_file"]=f,k.value=!1)},removePhoto:f=>{u.value[f+"_file"]=null}}},methods:{formatCurrency(b){let e=this.formData[b].replace(/\D/g,"");e=e.replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.formData[b]=e}}},j={class:"bg-white min-h-screen"},G={class:"overflow-x-auto whitespace-nowrap bg-gray-100 border-b flex scrollbar-hide fixed top-12 left-0 w-full z-40",ref:"categoryContainer"},z=["onClick"],L={class:"p-4 mt-20"},q={key:1},E={class:"block text-sm font-medium"},J=["onUpdate:modelValue","placeholder","onInput"],K=["onUpdate:modelValue","onInput","placeholder"],Q=["onUpdate:modelValue","placeholder"],W=["onUpdate:modelValue"],H={key:4,class:"mt-2 flex justify-start gap-4"},R=["onClick"],X=["onClick"],Y={key:5,class:"mt-3"},Z={class:"flex items-center space-x-20"},$={key:0,class:"w-40 h-32"},ee=["src"],le=["onClick"],te=["onClick"];function ae(b,e,n,a,g,u){const o=D("DetailMobil"),k=D("FileModal");return d(),r("div",j,[e[4]||(e[4]=l("div",{class:"bg-blue-600 text-white text-center py-4 font-bold text-lg fixed top-0 left-0 w-full z-50"}," Inspeksi Mobil ",-1)),l("div",G,[l("button",{onClick:e[0]||(e[0]=(...t)=>a.selectDetailMobil&&a.selectDetailMobil(...t)),class:x(["flex-shrink-0 px-4 py-3 border-b-2",a.activeTab===-1?"border-blue-600 text-blue-600 font-bold":"border-transparent text-gray-500"])}," Detail Mobil ",2),(d(!0),r(h,null,M(a.categories,(t,i)=>(d(),r("button",{key:t.id,onClick:C=>a.selectCategory(t,i),class:x(["flex-shrink-0 px-4 py-3 border-b-2",a.activeTab===i?"border-blue-600 text-blue-600 font-bold":"border-transparent text-gray-500"])},y(t.name)+" ("+y(a.filledCounts[t.id]||0)+"/"+y(t.inspection_points.length)+") ",11,z))),128))],512),l("div",L,[a.activeTab===-1?(d(),V(o,{key:0,detailMobilPoints:a.detailMobilPoints,formData:a.formData},null,8,["detailMobilPoints","formData"])):a.inspectionPoints.length?(d(),r("div",q,[(d(!0),r(h,null,M(a.inspectionPoints,t=>(d(),r("div",{key:t.id,class:"mt-4"},[l("label",E,y(t.name),1),t.type_input==="Input Text"?s((d(),r("input",{key:0,type:"text","onUpdate:modelValue":i=>a.formData[t.id]=i,class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:t.placeholder,onInput:i=>a.formData[t.id]=i.target.value.toUpperCase()},null,40,J)),[[m,a.formData[t.id]]]):p("",!0),t.type_input==="Input Account"?s((d(),r("input",{key:1,type:"text","onUpdate:modelValue":i=>a.formData[t.id]=i,onInput:i=>u.formatCurrency(t.id),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:t.placeholder},null,40,K)),[[m,a.formData[t.id]]]):p("",!0),t.type_input==="Input Number"?s((d(),r("input",{key:2,type:"number","onUpdate:modelValue":i=>a.formData[t.id]=i,class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:t.placeholder},null,8,Q)),[[m,a.formData[t.id]]]):p("",!0),t.type_input==="Tanggal"?s((d(),r("input",{key:3,type:"date","onUpdate:modelValue":i=>a.formData[t.id]=i,class:"w-full border px-3 py-2 rounded-lg mt-1"},null,8,W)),[[m,a.formData[t.id]]]):p("",!0),t.type_input==="Option to Foto"?(d(),r("div",H,[l("button",{onClick:i=>a.toggleOption(t.id,"Ada"),class:x([{"bg-blue-500 text-white":a.formData[t.id]==="Ada"},"border px-4 py-2 rounded-lg"])},"Ada",10,R),l("button",{onClick:i=>a.toggleOption(t.id,"Tidak Ada"),class:x([{"bg-blue-500 text-white":a.formData[t.id]==="Tidak Ada"},"border px-4 py-2 rounded-lg"])},"Tidak Ada",10,X)])):p("",!0),t.type_input==="Foto"||a.formData[t.id]==="Ada"?(d(),r("div",Y,[e[3]||(e[3]=l("p",{class:"text-gray-600 text-sm"},"File JPG berukuran maks 2,5 MB",-1)),l("div",Z,[a.formData[t.id+"_file"]?(d(),r("div",$,[l("img",{src:a.formData[t.id+"_file"],alt:"Foto",class:"rounded-xl object-cover w-full h-full",style:{"aspect-ratio":"4 / 3"}},null,8,ee)])):p("",!0),a.formData[t.id+"_file"]?(d(),r("button",{key:1,onClick:i=>a.removePhoto(t.id),class:"bg-red-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-red-700 transition"}," Delete ",8,le)):(d(),r("div",{key:2,class:"photo-upload border rounded-xl p-3 text-center cursor-pointer h-32 flex items-center w-full justify-center",onClick:i=>a.openModal(t.id)},e[2]||(e[2]=[l("div",{class:"upload-placeholder flex flex-col items-center"},[l("i",{class:"icon-upload text-gray-400 text-3xl mb-2"}),l("p",{class:"text-gray-500"},"Upload Foto")],-1)]),8,te))])])):p("",!0)]))),128))])):p("",!0)]),F(k,{isVisible:a.showModal,onClose:e[1]||(e[1]=t=>a.showModal=!1),onCamera:b.openCamera,onGallery:b.openGallery,onFileSelected:a.handleFileUpload},null,8,["isVisible","onCamera","onGallery","onFileSelected"])])}const ue=w(S,[["render",ae],["__scopeId","data-v-38ab99b9"]]);export{ue as default};
