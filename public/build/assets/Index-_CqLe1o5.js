import{r as f,j as C,T as z,A as j,d,o as r,a as t,b as a,w as b,f as k,k as _,x as m,F as u,g as p,h as G,u as l,t as n,N as V}from"./app-DE5iW-zt.js";import{_ as $}from"./PrimaryButton-C5A_b8zd.js";import{_ as K}from"./SecondaryButton-a_C0-x8w.js";import{_ as v}from"./InputLabel-CBUKSUPl.js";import{_ as J}from"./TextInput-DjM9czBB.js";import{_ as c}from"./InputError-C58XQGz-.js";import{_ as R}from"./CustomModal-Cflpug2n.js";const W={class:"p-4"},X={class:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-4 md:space-y-0"},Z={class:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4"},ee=["value"],se=["value"],te=["value"],oe={class:"overflow-x-auto"},le={class:"min-w-full border bg-white rounded-lg shadow-md"},de={class:"px-4 py-2"},re={class:"px-4 py-2"},ae={class:"px-4 py-2"},ie={class:"px-4 py-2"},ne={class:"px-4 py-2"},ue={class:"px-4 py-2"},pe={class:"px-4 py-2"},_e={class:"px-4 py-2"},me={class:"px-4 py-2"},ce={class:"px-4 py-2 text-center"},ye={class:"mb-4"},ve=["value"],fe={class:"mb-4"},be=["value"],xe={class:"mb-4"},ge=["value"],ke={class:"mb-4"},we=["value"],he={class:"mb-4"},Me=["value"],Te={class:"mb-4"},Ce=["value"],Ve={class:"mb-4"},Be=["value"],Ue={class:"mb-4"},Pe={class:"flex space-x-4"},Ae=["value"],Se=["value"],$e={class:"flex justify-end mt-4"},Le={__name:"Index",props:{cars:Array,brands:Array,carModels:Array,carTypes:Array,engineCapacities:Array,transmissions:Array,fuelTypes:Array},setup(y){const B=y,U=f(""),w=f(""),h=f(""),M=f(""),P=f(!1),x=f(!1),E=f(null),L=new Date().getFullYear(),A=C(()=>{const i=[];for(let s=1999;s<=L;s++)i.push(s);return i}),o=z({brand_id:"",car_model_id:"",car_type_id:"",year:"",engine_capacity_id:"",transmission_id:"",fuel_type_id:"",production_period_start:"",production_period_end:""}),Y=C(()=>o.brand_id?B.carModels.filter(i=>i.brand_id==o.brand_id):[]),H=C(()=>o.car_model_id?B.carTypes.filter(i=>i.car_model_id==o.car_model_id):[]),O=C(()=>B.cars.filter(i=>{var F,I;const s=w.value?i.brand_id==w.value:!0,e=h.value?i.car_model_id==h.value:!0,g=M.value?i.car_type_id==M.value:!0,S=(I=(F=i.car_model)==null?void 0:F.name)==null?void 0:I.toLowerCase().includes(U.value.toLowerCase());return s&&e&&g&&S})),N=(i,s=null)=>{if(x.value=i==="edit",P.value=!0,x.value&&s){E.value=s.id;const[e,g]=s.production_period.split("-");o.brand_id=s.brand_id,o.car_model_id=s.car_model_id,o.car_type_id=s.car_type_id,o.year=s.year,o.engine_capacity_id=s.engine_capacity_id,o.transmission_id=s.transmission_id,o.fuel_type_id=s.fuel_type_id,o.production_period_start=e,o.production_period_end=g}else D()},D=()=>{o.reset(),o.year="",o.production_period_start="",o.production_period_end=""},T=()=>{P.value=!1,D()},Q=()=>{({...o.data(),production_period_start:o.production_period_start,production_period_end:o.production_period_end},x.value?o.put(route("cars.update",E.value),{onSuccess:()=>{T(),V.reload({only:["cars"]})},onError:i=>{console.error("Update error:",i)}}):o.post(route("cars.store"),{onSuccess:()=>{T(),V.reload({only:["cars"]})},onError:i=>{console.error("Create error:",i)}}))},q=i=>{confirm("Apakah Anda yakin ingin menghapus data ini?")&&V.delete(route("cars.destroy",i),{onSuccess:()=>V.reload({only:["cars"]}),onError:s=>console.error("Delete error:",s)})};return j(()=>o.brand_id,i=>{o.car_model_id="",o.car_type_id=""}),j(()=>o.car_model_id,i=>{o.car_type_id=""}),(i,s)=>(r(),d("div",W,[t("div",X,[a($,{onClick:s[0]||(s[0]=e=>N("create"))},{default:b(()=>s[14]||(s[14]=[k("Tambah Mobil")])),_:1}),t("div",Z,[_(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>w.value=e),class:"border rounded px-8 py-2"},[s[15]||(s[15]=t("option",{value:""},"Semua Brand",-1)),(r(!0),d(u,null,p(y.brands,e=>(r(),d("option",{key:e.id,value:e.id},n(e.name),9,ee))),128))],512),[[m,w.value]]),_(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>h.value=e),class:"border rounded px-8 py-2"},[s[16]||(s[16]=t("option",{value:""},"Semua Model",-1)),(r(!0),d(u,null,p(y.carModels,e=>(r(),d("option",{key:e.id,value:e.id},n(e.name),9,se))),128))],512),[[m,h.value]]),_(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>M.value=e),class:"border rounded px-8 py-2"},[s[17]||(s[17]=t("option",{value:""},"Semua Tipe",-1)),(r(!0),d(u,null,p(y.carTypes,e=>(r(),d("option",{key:e.id,value:e.id},n(e.name),9,te))),128))],512),[[m,M.value]]),a(J,{modelValue:U.value,"onUpdate:modelValue":s[4]||(s[4]=e=>U.value=e),placeholder:"Cari Mobil...",class:"pl-10 pr-4 py-2 border rounded-md"},null,8,["modelValue"])])]),t("div",oe,[t("table",le,[s[20]||(s[20]=t("thead",{class:"bg-gray-200"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"No"),t("th",{class:"px-4 py-2 text-left"},"Brand"),t("th",{class:"px-4 py-2 text-left"},"Model"),t("th",{class:"px-4 py-2 text-left"},"Tipe"),t("th",{class:"px-4 py-2 text-left"},"Tahun"),t("th",{class:"px-4 py-2 text-left"},"Kapasitas Mesin"),t("th",{class:"px-4 py-2 text-left"},"Transmisi"),t("th",{class:"px-4 py-2 text-left"},"Bahan Bakar"),t("th",{class:"px-4 py-2 text-left"},"Periode Produksi"),t("th",{class:"px-4 py-2 text-center"},"Aksi")])],-1)),t("tbody",null,[(r(!0),d(u,null,p(O.value,(e,g)=>(r(),d("tr",{key:e.id,class:"border-b hover:bg-gray-100"},[t("td",de,n(g+1),1),t("td",re,n(e.brand.name),1),t("td",ae,n(e.car_model.name),1),t("td",ie,n(e.car_type.name),1),t("td",ne,n(e.year),1),t("td",ue,n(e.engine_capacity.value),1),t("td",pe,n(e.transmission.type),1),t("td",_e,n(e.fuel_type.name),1),t("td",me,n(e.production_period),1),t("td",ce,[a(K,{onClick:S=>N("edit",e)},{default:b(()=>s[18]||(s[18]=[k("Edit")])),_:2},1032,["onClick"]),a($,{class:"ml-2 bg-red-600 hover:bg-red-700",onClick:S=>q(e.id)},{default:b(()=>s[19]||(s[19]=[k("Hapus")])),_:2},1032,["onClick"])])]))),128))])])]),a(R,{show:P.value,title:x.value?"Edit Mobil":"Tambah Mobil",onClose:T},{content:b(()=>[t("form",{onSubmit:G(Q,["prevent"])},[t("div",ye,[a(v,{for:"brand_id",value:"Brand"}),_(t("select",{id:"brand_id","onUpdate:modelValue":s[5]||(s[5]=e=>l(o).brand_id=e),class:"block w-full border p-2 rounded"},[s[21]||(s[21]=t("option",{value:""},"Pilih Brand / Merek",-1)),(r(!0),d(u,null,p(y.brands,e=>(r(),d("option",{key:e.id,value:e.id},n(e.name),9,ve))),128))],512),[[m,l(o).brand_id]]),a(c,{message:l(o).errors.brand_id},null,8,["message"])]),t("div",fe,[a(v,{for:"car_model_id",value:"Model"}),_(t("select",{id:"car_model_id","onUpdate:modelValue":s[6]||(s[6]=e=>l(o).car_model_id=e),class:"block w-full border p-2 rounded"},[s[22]||(s[22]=t("option",{value:""},"Pilih Model",-1)),(r(!0),d(u,null,p(Y.value,e=>(r(),d("option",{key:e.id,value:e.id},n(e.name),9,be))),128))],512),[[m,l(o).car_model_id]]),a(c,{message:l(o).errors.car_model_id},null,8,["message"])]),t("div",xe,[a(v,{for:"car_type_id",value:"Tipe"}),_(t("select",{id:"car_type_id","onUpdate:modelValue":s[7]||(s[7]=e=>l(o).car_type_id=e),class:"block w-full border p-2 rounded"},[s[23]||(s[23]=t("option",{value:""},"Pilih Tipe",-1)),(r(!0),d(u,null,p(H.value,e=>(r(),d("option",{key:e.id,value:e.id},n(e.name),9,ge))),128))],512),[[m,l(o).car_type_id]]),a(c,{message:l(o).errors.car_type_id},null,8,["message"])]),t("div",ke,[a(v,{for:"year",value:"Tahun Pembuatan"}),_(t("select",{id:"year","onUpdate:modelValue":s[8]||(s[8]=e=>l(o).year=e),class:"block w-full border p-2 rounded"},[s[24]||(s[24]=t("option",{value:""},"Pilih Tahun",-1)),(r(!0),d(u,null,p(A.value,e=>(r(),d("option",{key:e,value:e},n(e),9,we))),128))],512),[[m,l(o).year]]),a(c,{message:l(o).errors.year},null,8,["message"])]),t("div",he,[a(v,{for:"engine_capacity_id",value:"Kapasitas Mesin"}),_(t("select",{id:"engine_capacity_id","onUpdate:modelValue":s[9]||(s[9]=e=>l(o).engine_capacity_id=e),class:"block w-full border p-2 rounded"},[s[25]||(s[25]=t("option",{value:""},"Pilih Kapasitas",-1)),(r(!0),d(u,null,p(y.engineCapacities,e=>(r(),d("option",{key:e.id,value:e.id},n(e.value),9,Me))),128))],512),[[m,l(o).engine_capacity_id]]),a(c,{message:l(o).errors.engine_capacity_id},null,8,["message"])]),t("div",Te,[a(v,{for:"transmission_id",value:"Transmisi"}),_(t("select",{id:"transmission_id","onUpdate:modelValue":s[10]||(s[10]=e=>l(o).transmission_id=e),class:"block w-full border p-2 rounded"},[s[26]||(s[26]=t("option",{value:""},"Pilih Transmisi",-1)),(r(!0),d(u,null,p(y.transmissions,e=>(r(),d("option",{key:e.id,value:e.id},n(e.type),9,Ce))),128))],512),[[m,l(o).transmission_id]]),a(c,{message:l(o).errors.transmission_id},null,8,["message"])]),t("div",Ve,[a(v,{for:"fuel_type_id",value:"Bahan Bakar"}),_(t("select",{id:"fuel_type_id","onUpdate:modelValue":s[11]||(s[11]=e=>l(o).fuel_type_id=e),class:"block w-full border p-2 rounded"},[s[27]||(s[27]=t("option",{value:""},"Pilih Bahan Bakar",-1)),(r(!0),d(u,null,p(y.fuelTypes,e=>(r(),d("option",{key:e.id,value:e.id},n(e.name),9,Be))),128))],512),[[m,l(o).fuel_type_id]]),a(c,{message:l(o).errors.fuel_type_id},null,8,["message"])]),t("div",Ue,[a(v,{value:"Periode Produksi"}),t("div",Pe,[_(t("select",{"onUpdate:modelValue":s[12]||(s[12]=e=>l(o).production_period_start=e),class:"block w-full border p-2 rounded"},[s[28]||(s[28]=t("option",{value:""},"Pilih Tahun",-1)),(r(!0),d(u,null,p(A.value,e=>(r(),d("option",{key:e,value:e},n(e),9,Ae))),128))],512),[[m,l(o).production_period_start]]),_(t("select",{"onUpdate:modelValue":s[13]||(s[13]=e=>l(o).production_period_end=e),class:"block w-full border p-2 rounded"},[s[29]||(s[29]=t("option",{value:""},"Pilih Tahun",-1)),(r(!0),d(u,null,p(A.value,e=>(r(),d("option",{key:e,value:e},n(e),9,Se))),128))],512),[[m,l(o).production_period_end]])]),a(c,{message:l(o).errors.production_period_start},null,8,["message"]),a(c,{message:l(o).errors.production_period_end},null,8,["message"])]),t("div",$e,[a(K,{type:"button",onClick:T},{default:b(()=>s[30]||(s[30]=[k("Batal")])),_:1}),a($,{class:"ml-3",type:"submit",disabled:l(o).processing},{default:b(()=>[k(n(x.value?"Update":"Simpan"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"])]))}};export{Le as default};
