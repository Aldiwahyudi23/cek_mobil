import{r as u,T as A,j as B,y as j,d as v,o as _,a as s,b as a,w as r,f as i,F,g as I,h as T,u as p,t as y,N as c}from"./app-DNrnTGfX.js";import{_ as b}from"./PrimaryButton-CQaepZNL.js";import{_ as h}from"./SecondaryButton-BHwziIXg.js";import{_ as U}from"./InputLabel-6jKtLArb.js";import{_ as k}from"./TextInput-BFowFMj6.js";import{_ as D}from"./CustomModal-Hbs5xvlG.js";const q={class:"p-4"},z={class:"flex justify-between items-center mb-4"},H={class:"relative"},L={class:"overflow-x-auto"},O={class:"min-w-full border bg-white rounded-lg shadow-md"},Q={class:"px-4 py-2"},G={class:"px-4 py-2"},J={class:"px-4 py-2 text-center"},P={class:"mb-4"},R={class:"flex justify-end mt-4"},te={__name:"Index",props:{capacities:Array},setup(C){const E=C,m=u(!1),n=u(!1),g=u(null),l=A({value:""}),f=u(""),V=B(()=>E.capacities.filter(t=>t.value.toString().includes(f.value))),x=(t,e=null)=>{n.value=t==="edit",m.value=!0,n.value&&e?(g.value=e.id,l.value=e.value):w()},w=()=>{l.reset()},d=()=>{m.value=!1,w()},$=()=>{n.value?l.put(route("capacity.update",g.value),{onSuccess:()=>{d(),c.reload({only:["capacities"]})},onError:t=>{console.error("Error saat update:",t)}}):l.post(route("capacity.store"),{onSuccess:()=>{d(),c.reload({only:["capacities"]})},onError:t=>{console.error("Error saat tambah:",t)}})},S=t=>{confirm("Apakah Anda yakin ingin menghapus data ini?")&&c.delete(route("capacity.destroy",t),{onSuccess:()=>{c.reload({only:["capacities"]})},onError:e=>{console.error("Error saat hapus:",e)}})};return(t,e)=>{const K=j("InputError");return _(),v("div",q,[s("div",z,[a(b,{onClick:e[0]||(e[0]=o=>x("create"))},{default:r(()=>e[3]||(e[3]=[i("Tambah Kapasitas")])),_:1}),s("div",H,[a(k,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=o=>f.value=o),placeholder:"Cari Kapasitas...",class:"pl-10 pr-4 py-2 border rounded-md w-64"},null,8,["modelValue"]),e[4]||(e[4]=s("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35m0 0A8.5 8.5 0 1010.5 19a8.5 8.5 0 006.15-2.85z"})],-1))])]),s("div",L,[s("table",O,[e[7]||(e[7]=s("thead",{class:"bg-gray-200"},[s("tr",null,[s("th",{class:"px-4 py-2 text-left"},"No"),s("th",{class:"px-4 py-2 text-left"},"Kapasitas (CC)"),s("th",{class:"px-4 py-2 text-center"},"Aksi")])],-1)),s("tbody",null,[(_(!0),v(F,null,I(V.value,(o,M)=>(_(),v("tr",{key:o.id,class:"border-b hover:bg-gray-100"},[s("td",Q,y(M+1),1),s("td",G,y(o.value),1),s("td",J,[a(h,{onClick:N=>x("edit",o)},{default:r(()=>e[5]||(e[5]=[i("Edit")])),_:2},1032,["onClick"]),a(b,{class:"ml-2 bg-red-600 hover:bg-red-700",onClick:N=>S(o.id)},{default:r(()=>e[6]||(e[6]=[i("Hapus")])),_:2},1032,["onClick"])])]))),128))])])]),a(D,{show:m.value,title:n.value?"Edit Kapasitas":"Tambah Kapasitas",onClose:d},{content:r(()=>[s("form",{onSubmit:T($,["prevent"])},[s("div",P,[a(U,{for:"value",value:"Kapasitas (CC)"}),a(k,{id:"value",modelValue:p(l).value,"onUpdate:modelValue":e[2]||(e[2]=o=>p(l).value=o),modelModifiers:{number:!0},type:"number",class:"block w-full",required:""},null,8,["modelValue"]),a(K,{message:p(l).errors.value},null,8,["message"])]),s("div",R,[a(h,{type:"button",onClick:d},{default:r(()=>e[8]||(e[8]=[i("Batal")])),_:1}),a(b,{class:"ml-3",type:"submit",disabled:p(l).processing},{default:r(()=>[i(y(n.value?"Update":"Simpan"),1)]),_:1},8,["disabled"])])],32)]),_:1},8,["show","title"])])}}};export{te as default};
