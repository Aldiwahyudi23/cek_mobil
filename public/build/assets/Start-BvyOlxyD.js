import{d as r,e as u,o as d,a as s,f as w,s as T,b as F,F as v,g as M,Q as A,r as p,x as G,n as x,t as g,k as h,y}from"./app-CcOnrdtz.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={props:["isVisible"],emits:["close","camera","gallery"],methods:{closeModal(){this.$emit("close")},selectCamera(){this.$emit("camera")},selectGallery(){this.$emit("gallery")}}},I={key:0,class:"fixed inset-0 flex items-end justify-center bg-black bg-opacity-50"},B={class:"bg-white p-4 rounded-t-lg w-full max-w-md"},N={class:"flex justify-between"};function j(c,t,f,l,m,a){return f.isVisible?(d(),r("div",I,[s("div",B,[s("div",N,[s("button",{onClick:t[0]||(t[0]=(...n)=>a.selectCamera&&a.selectCamera(...n)),class:"flex items-center gap-2 border px-4 py-2 rounded-lg"},t[3]||(t[3]=[s("i",{class:"fas fa-camera"},null,-1),w(" Kamera ")])),s("button",{onClick:t[1]||(t[1]=(...n)=>a.selectGallery&&a.selectGallery(...n)),class:"flex items-center gap-2 border px-4 py-2 rounded-lg"},t[4]||(t[4]=[s("i",{class:"fas fa-image"},null,-1),w(" Galeri ")]))]),s("button",{onClick:t[2]||(t[2]=(...n)=>a.closeModal&&a.closeModal(...n)),class:"absolute top-2 right-2 text-lg"},"Ã—")])])):u("",!0)}const O=D(U,[["render",j]]),P={setup(){const c=A(),t=p(c.props.categories),f=p(0),l=p(t.value.length?t.value[0].inspection_points:[]),m=p({}),a=p({}),n=p(null),e=(i,b)=>{f.value=b,l.value=i.inspection_points.filter(_=>_.is_active),o(),C()},o=()=>{m.value={},l.value.forEach(i=>{m.value[i.id]=""})},k=(i,b)=>{m.value[i]=b.target.files[0],V()},V=()=>{t.value.forEach(i=>{let b=i.inspection_points.filter(_=>m.value[_.id]).length;a.value[i.id]=b})},C=()=>{if(n.value){const i=n.value.children[f.value];i&&n.value.scrollTo({left:i.offsetLeft-n.value.offsetWidth/2+i.offsetWidth/2,behavior:"smooth"})}};return G(()=>{C()}),{categories:t,activeTab:f,inspectionPoints:l,formData:m,selectCategory:e,handleFileUpload:k,filledCounts:a,categoryContainer:n,showModal:!1,selectedFilePoint:null}},components:{FileModal:O},methods:{formatCurrency(c){let t=this.formData[c].replace(/\D/g,"");t=t.replace(/\B(?=(\d{3})+(?!\d))/g,"."),this.formData[c]=t},toggleOption(c,t){this.formData[c]=t},openModal(){this.showModal=!0},openCamera(){this.showModal=!1,console.log("Membuka Kamera...")},openGallery(){this.showModal=!1,console.log("Membuka Galeri...")}}},E={class:"bg-white min-h-screen"},z={class:"overflow-x-auto whitespace-nowrap bg-gray-100 border-b flex scrollbar-hide",ref:"categoryContainer"},K=["onClick"],L={class:"p-4"},S={key:0},W={class:"block text-sm font-medium"},Q=["onUpdate:modelValue","placeholder"],q=["onUpdate:modelValue","placeholder"],H=["onUpdate:modelValue","onInput","placeholder"],J=["onUpdate:modelValue"],R={key:4,class:"mt-2 flex justify-center gap-4"},X=["onClick"],Y=["onClick"],Z={key:5,class:"mt-2 flex justify-center"};function $(c,t,f,l,m,a){const n=T("FileModal");return d(),r(v,null,[s("div",E,[t[3]||(t[3]=s("div",{class:"bg-blue-600 text-white text-center py-4 font-bold text-lg"},"Inspeksi Mobil",-1)),s("div",z,[(d(!0),r(v,null,M(l.categories,(e,o)=>(d(),r("button",{key:e.id,onClick:k=>l.selectCategory(e,o),class:x(["flex-shrink-0 px-4 py-3 border-b-2",l.activeTab===o?"border-blue-600 text-blue-600 font-bold":"border-transparent text-gray-500"])},g(e.name)+" ("+g(l.filledCounts[e.id]||0)+"/"+g(e.inspection_points.length)+") ",11,K))),128))],512),s("div",L,[l.inspectionPoints.length?(d(),r("div",S,[(d(!0),r(v,null,M(l.inspectionPoints,e=>(d(),r("div",{key:e.id,class:"mt-4"},[s("label",W,g(e.name),1),e.type_input==="Input Text"?h((d(),r("input",{key:0,type:"text","onUpdate:modelValue":o=>l.formData[e.id]=o,class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:e.placeholder},null,8,Q)),[[y,l.formData[e.id]]]):u("",!0),e.type_input==="Input Number"?h((d(),r("input",{key:1,type:"number","onUpdate:modelValue":o=>l.formData[e.id]=o,class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:e.placeholder},null,8,q)),[[y,l.formData[e.id]]]):u("",!0),e.type_input==="Input Account"?h((d(),r("input",{key:2,type:"text","onUpdate:modelValue":o=>l.formData[e.id]=o,onInput:o=>a.formatCurrency(e.id),class:"w-full border px-3 py-2 rounded-lg mt-1",placeholder:e.placeholder},null,40,H)),[[y,l.formData[e.id]]]):u("",!0),e.type_input==="Tanggal"?h((d(),r("input",{key:3,type:"date","onUpdate:modelValue":o=>l.formData[e.id]=o,class:"w-full border px-3 py-2 rounded-lg mt-1"},null,8,J)),[[y,l.formData[e.id]]]):u("",!0),e.type_input==="Option to Foto"?(d(),r("div",R,[s("button",{onClick:o=>a.toggleOption(e.id,"Ada"),class:x([{"bg-blue-500 text-white":l.formData[e.id]==="Ada"},"border px-4 py-2 rounded-lg"])},"Ada",10,X),s("button",{onClick:o=>a.toggleOption(e.id,"Tidak Ada"),class:x([{"bg-blue-500 text-white":l.formData[e.id]==="Tidak Ada"},"border px-4 py-2 rounded-lg"])},"Tidak Ada",10,Y)])):u("",!0),l.formData[e.id]==="Ada"?(d(),r("div",Z,[s("button",{onClick:t[0]||(t[0]=(...o)=>a.openModal&&a.openModal(...o)),class:"border p-2 rounded-lg flex items-center"},t[2]||(t[2]=[s("i",{class:"fas fa-camera text-xl"},null,-1)]))])):u("",!0)]))),128))])):u("",!0)])]),F(n,{isVisible:l.showModal,onClose:t[1]||(t[1]=e=>l.showModal=!1),onCamera:a.openCamera,onGallery:a.openGallery},null,8,["isVisible","onCamera","onGallery"])],64)}const le=D(P,[["render",$],["__scopeId","data-v-49438978"]]);export{le as default};
