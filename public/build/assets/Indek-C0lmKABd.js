import{r as p,Q as S,T as V,j as K,d as m,o as v,a as s,b as o,k as M,w as n,f as d,s as T,F as B,g as E,h as N,u as _,t as y}from"./app-DNrnTGfX.js";import{_ as j}from"./CustomModal-Hbs5xvlG.js";import{_ as b}from"./PrimaryButton-CQaepZNL.js";import{_ as g}from"./SecondaryButton-BHwziIXg.js";import{_ as A}from"./InputLabel-6jKtLArb.js";import{_ as D}from"./TextInput-BFowFMj6.js";import{_ as F}from"./InputError-VbUhc96m.js";const U={class:"p-4"},I={class:"flex justify-between items-center"},q={class:"mt-4 overflow-x-auto"},H={class:"min-w-full border bg-white rounded-lg shadow-md"},L={class:"px-4 py-2"},O={class:"px-4 py-2"},Q={class:"px-4 py-2 text-center"},z={class:"mb-4"},G={class:"flex justify-end mt-4"},se={__name:"Indek",setup(J){const i=p([...S().props.capacities]),c=p(!1),r=p(!1),f=p(""),t=V({id:"",value:""}),h=K(()=>i.value.filter(a=>a.value.toString().includes(f.value))),x=(a,e=null)=>{r.value=a==="edit",r.value&&e?(t.id=e.id,t.value=e.value):t.reset(),c.value=!0},u=()=>{t.reset(),c.value=!1},k=()=>{r.value?t.put(route("capacity.update",t.id),{onSuccess:()=>{const a=i.value.findIndex(e=>e.id===t.id);a!==-1&&(i.value[a]={...t.data()}),u()}}):t.post(route("capacity.store"),{onSuccess:a=>{i.value.unshift(a.props.capacities[0]),u()}})},w=a=>{confirm("Apakah Anda yakin ingin menghapus kapasitas ini?")&&t.delete(route("capacity.destroy",a),{onSuccess:()=>{i.value=i.value.filter(e=>e.id!==a)}})};return(a,e)=>(v(),m("div",U,[s("div",I,[o(b,{onClick:e[0]||(e[0]=l=>x("create"))},{default:n(()=>e[3]||(e[3]=[d("Tambah Kapasitas")])),_:1}),M(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),type:"text",placeholder:"Cari Kapasitas...",class:"border px-3 py-2 rounded-md shadow-sm w-64"},null,512),[[T,f.value]])]),s("div",q,[s("table",H,[e[6]||(e[6]=s("thead",{class:"bg-gray-200"},[s("tr",null,[s("th",{class:"px-4 py-2 text-left"},"No"),s("th",{class:"px-4 py-2 text-left"},"Kapasitas (CC)"),s("th",{class:"px-4 py-2 text-center"},"Aksi")])],-1)),s("tbody",null,[(v(!0),m(B,null,E(h.value,(l,C)=>(v(),m("tr",{key:l.id,class:"border-b hover:bg-gray-100"},[s("td",L,y(C+1),1),s("td",O,y(l.value),1),s("td",Q,[o(g,{onClick:$=>x("edit",l)},{default:n(()=>e[4]||(e[4]=[d("Edit")])),_:2},1032,["onClick"]),o(b,{class:"ml-2 bg-red-600 hover:bg-red-700",onClick:$=>w(l.id)},{default:n(()=>e[5]||(e[5]=[d("Hapus")])),_:2},1032,["onClick"])])]))),128))])])]),o(j,{show:c.value,title:r.value?"Edit Kapasitas":"Tambah Kapasitas",onClose:u},{content:n(()=>[s("form",{onSubmit:N(k,["prevent"])},[s("div",z,[o(A,{for:"value",value:"Kapasitas (CC)"}),o(D,{id:"value",modelValue:_(t).value,"onUpdate:modelValue":e[2]||(e[2]=l=>_(t).value=l),type:"number",class:"block w-full",required:""},null,8,["modelValue"]),o(F,{message:_(t).errors.value},null,8,["message"])]),s("div",G,[o(g,{type:"button",onClick:u},{default:n(()=>e[7]||(e[7]=[d("Batal")])),_:1}),o(b,{class:"ml-3",type:"submit"},{default:n(()=>[d(y(r.value?"Update":"Simpan"),1)]),_:1})])],32)]),_:1},8,["show","title"])]))}};export{se as default};
